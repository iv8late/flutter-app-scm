
-- Tabla: themes
CREATE TABLE themes (
    ID INT PRIMARY KEY,
    title VARCHAR(50),
    description VARCHAR(50),
    stageID INT, 
 	status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
    FOREIGN KEY (stageID) REFERENCES stages(ID)
);

-- Tabla: courses
CREATE TABLE courses (
    ID INT PRIMARY KEY,
    proficiencyID INT,
    title VARCHAR(50),
    description VARCHAR(50),
    stageID INT,
    themeID INT,
    status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
    FOREIGN KEY (proficiencyID) REFERENCES proficiency(ID),
    FOREIGN KEY (stageID) REFERENCES stages(ID),
    FOREIGN KEY (themeID) REFERENCES themes(ID)
);

-- Tabla: levels
-- CREATE TABLE levels (
--     ID INT PRIMARY KEY,
--     courseID INT,
--     stageID INT,
--     description VARCHAR(50),
--     status  BIT,
--     createdAt DATETIME DEFAULT GETDATE(),
--     updatedAt DATETIME NULL,
--     createdBy INT NULL,
--     updatedBy INT NULL,
--     FOREIGN KEY (courseID) REFERENCES courses(ID),
--     FOREIGN KEY (stageID) REFERENCES stages(ID)
-- );

-- Tabla: types
CREATE TABLE forTypes (
    ID INT PRIMARY KEY,
    code varchar(3),
    description VARCHAR(50),
 	status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL
);

-- Tabla: lessons
CREATE TABLE lessons (
    ID INT PRIMARY KEY,
    order INT,
    courseID INT,
    title VARCHAR(50),
    description VARCHAR(50),
    stageID INT,
 	status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
     FOREIGN KEY (stageID) REFERENCES stages(ID),
    FOREIGN KEY (CourseID) REFERENCES courses(ID),
   
);

-- Tabla: lessonsContent
CREATE TABLE lessonsContent (
    ID INT PRIMARY KEY,
    lessonID INT,
    typeID INT,
    title VARCHAR(50),
    content NVARCHAR(MAX), 
 	status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
    FOREIGN KEY (lessonID) REFERENCES lessons(ID)
     FOREIGN KEY (typeID) REFERENCES types(ID)
);

-- Tabla: proficiency
CREATE TABLE proficiency (
    ID INT PRIMARY KEY,
    code varchar (3),
    description VARCHAR(40),
    status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL
);



-- Tabla: role
CREATE TABLE role (
    ID INT PRIMARY KEY,
    code varchar (3),
    description VARCHAR(40),
    status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL
);

-- Tabla: stages
CREATE TABLE stages (
    ID INT PRIMARY KEY,
    code varchar (3),
    description VARCHAR(50),
    status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL
);



-- Tabla: user
CREATE TABLE user (
    ID INT PRIMARY KEY,
    username VARCHAR(25),
    firstName VARCHAR(40),
    lastName VARCHAR(40),
    mail VARCHAR(100),
    password VARCHAR(50),
    role INT,
    proficiencyID INT,
 	status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
    FOREIGN KEY (role) REFERENCES role(ID),
    FOREIGN KEY (proficiency) REFERENCES proficiency(ID)
);

-- Tabla: notes
CREATE TABLE notes (
    ID INT PRIMARY KEY,
    userID INT,
    lessonID INT,
    date DATE,
    name NVARCHAR(255),
    title NVARCHAR(255),
    content VARCHAR(MAX),
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
    FOREIGN KEY (userID) REFERENCES [user](ID),
    FOREIGN KEY (lessonID) REFERENCES lessons(ID)
);

-- Tabla: categories
CREATE TABLE categories (
    ID INT PRIMARY KEY,
    description VARCHAR(50),
    status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL
);

-- Tabla: rewards
CREATE TABLE rewards (
    rewardID INT PRIMARY KEY,
    userID INT,
    categoryID INT,
    description VARCHAR(400),
    status  BIT,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL,
    FOREIGN KEY (userID) REFERENCES [user](ID),
    FOREIGN KEY (categoryID) REFERENCES categories(ID)
);
CREATE TABLE catalog (
    ID INT PRIMARY KEY,
    typec VARCHAR(50) NOT NULL,
    code VARCHAR(50) NOT NULL,
    name VARCHAR(100) NOT NULL,
    showName VARCHAR(100) NULL,
    isActive BIT DEFAULT 1,
    createdAt DATETIME DEFAULT GETDATE(),
    updatedAt DATETIME NULL,
    createdBy INT NULL,
    updatedBy INT NULL
);
